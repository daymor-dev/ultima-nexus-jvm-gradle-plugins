= Ultima Nexus - Java Module
:toc: preamble
:toclevels: 2

Java-specific convention plugins for JVM projects.

== Overview

The `plugins-java` module provides Java development conventions:

* **Java Compilation**: Toolchain support with configurable JDK version
* **Java Application/Library**: Explicit plugins for application or library mode
* **Javadoc**: Documentation generation configuration
* **JSpecify**: Nullability annotations
* **Bundles**: Pre-configured bundles for applications and libraries

All plugins support configuration via extension DSL or gradle.properties.

== Plugins

[cols="1,3"]
|===
|Plugin ID |Description

|`dev.daymor.ultimanexus.jvm.gradle.feature.compile-java`
|Java compilation with toolchain support (default: Java 25)

|`dev.daymor.ultimanexus.jvm.gradle.feature.java-application`
|Java application mode (applies `application` plugin)

|`dev.daymor.ultimanexus.jvm.gradle.feature.java-library`
|Java library mode (applies `java-library` plugin)

|`dev.daymor.ultimanexus.jvm.gradle.feature.javadoc`
|Javadoc generation configuration

|`dev.daymor.ultimanexus.jvm.gradle.dependency.jspecify`
|JSpecify nullability annotations

|`dev.daymor.ultimanexus.jvm.gradle.bundle.java-simple-application`
|Simple Java application without quality checks

|`dev.daymor.ultimanexus.jvm.gradle.bundle.java-simple-library`
|Simple Java library without quality checks

|`dev.daymor.ultimanexus.jvm.gradle.bundle.java-complete-application`
|Complete Java application with quality checks

|`dev.daymor.ultimanexus.jvm.gradle.bundle.java-complete-library`
|Complete Java library with quality checks and publishing
|===

== Installation

Add to your version catalog (`gradle/libs.versions.toml`):

[source,toml]
----
[versions]
ultima-nexus-plugins = "latest.release"

[plugins]
ultimanexus-bundle-java-simple-application = { id = "dev.daymor.ultimanexus.jvm.gradle.bundle.java-simple-application", version.ref = "ultima-nexus-plugins" }
ultimanexus-bundle-java-simple-library = { id = "dev.daymor.ultimanexus.jvm.gradle.bundle.java-simple-library", version.ref = "ultima-nexus-plugins" }
ultimanexus-bundle-java-complete-application = { id = "dev.daymor.ultimanexus.jvm.gradle.bundle.java-complete-application", version.ref = "ultima-nexus-plugins" }
ultimanexus-bundle-java-complete-library = { id = "dev.daymor.ultimanexus.jvm.gradle.bundle.java-complete-library", version.ref = "ultima-nexus-plugins" }
ultimanexus-feature-compile-java = { id = "dev.daymor.ultimanexus.jvm.gradle.feature.compile-java", version.ref = "ultima-nexus-plugins" }
----

== Java Complete Bundles

Full-featured Java development bundles with quality checks, testing, and reporting.

=== Java Complete Application

For executable Java applications (CLI tools, services):

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.java.complete.application)
}
----

Includes:

* Base Gradle project conventions
* All quality checks, tests, and reports
* Java compilation and Javadoc
* `application` plugin with `run` task
* JSpecify nullability annotations

=== Java Complete Library

For shared libraries and SDKs:

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.java.complete.library)
}
----

Includes:

* Everything in application bundle
* `java-library` plugin (API/implementation separation)
* Maven Central publishing with sources and Javadoc JARs

=== Mode Comparison

[cols="1,2,1,1,2"]
|===
|Bundle |Plugin |run task |Publishing |Use Case

|`java-complete-application`
|`application`
|Enabled
|Not included
|CLI tools, services

|`java-complete-library`
|`java-library`
|None
|Included
|Shared libraries, SDKs
|===

== Java Simple Bundles

Minimal Java setup without quality checks.

=== Java Simple Application

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.java.simple.application)
}
----

=== Java Simple Library

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.java.simple.library)
}
----

=== Includes

* Base Gradle project conventions
* Java compilation configuration
* `application` or `java-library` plugin respectively

== Java Compilation Plugin

Configures Java compilation settings including JDK version and compiler options.

=== Usage

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.feature.compile.java)
}
----

=== Configuration via Extension

[source,kotlin]
----
compileJavaConfig {
    jdkVersion.set(21)
}
----

=== Configuration via gradle.properties

[source,properties]
----
jdkVersion=21
----

=== Default Settings

* JDK version: 25
* Fork compilation enabled
* UTF-8 encoding
* Compiler flags:
** `-parameters` - Preserve method parameter names
** `-implicit:none` - No implicit annotation processing
** `-Werror` - Treat warnings as errors
** `-Xlint:all,-serial,-processing` - Enable most lint warnings

=== Reproducible Builds

Archives are configured for reproducibility:

* Consistent file order
* No timestamps preserved
* Standard file permissions (0664 for files, 0775 for directories)

== Java Application Plugin

Applies the Gradle `application` plugin for executable Java projects.

=== Usage

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.feature.java.application)
}
----

== Java Library Plugin

Applies the Gradle `java-library` plugin for shared libraries.

=== Usage

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.feature.java.library)
}
----

== Javadoc Plugin

Configures Javadoc generation.

=== Usage

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.feature.javadoc)
}
----

=== Running Javadoc

[source,bash]
----
./gradlew javadoc
----

== JSpecify Plugin

Adds https://jspecify.dev/[JSpecify] nullability annotations.

=== Usage

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.dependency.jspecify)
}
----

=== What It Does

Adds JSpecify as a compile-only dependency for nullability annotations:

[source,java]
----
import org.jspecify.annotations.NullMarked;
import org.jspecify.annotations.Nullable;

@NullMarked
public class MyClass {
    public void process(@Nullable String input) {
        // ...
    }
}
----

== Properties Reference

[cols="2,1,2,3"]
|===
|Property |Default |Plugin |Description

|`jdkVersion`
|`25`
|`compile-java`
|JDK version for Java compilation toolchain
|===

== Running Common Tasks

[source,bash]
----
# Compile Java
./gradlew compileJava

# Run quality checks
./gradlew qualityCheck

# Run all tests
./gradlew allTest

# Generate Javadoc
./gradlew javadoc

# Run application (application mode only)
./gradlew run

# Build distribution (application mode only)
./gradlew distZip
----

== Related Modules

* link:../plugins-base/README.adoc[plugins-base] - Base Gradle project conventions (dependency)
* link:../plugins-check/README.adoc[plugins-check] - Quality checks (used by java-complete)
* link:../plugins-test/README.adoc[plugins-test] - Testing infrastructure (used by java-complete)
* link:../plugins-report/README.adoc[plugins-report] - Reporting (used by java-complete)
* link:../plugins-publish/README.adoc[plugins-publish] - Publishing (used by java-complete)
* link:../plugins-spring-boot/README.adoc[plugins-spring-boot] - Spring Boot extensions
* link:../README.adoc[Root README] - Project overview and quick start
