= Ultima Nexus JVM Gradle Plugins
:toc: preamble
:toclevels: 2
:icons: font
:source-highlighter: highlight.js
:highlightjs-theme: monokai

image:https://img.shields.io/github/v/release/daymor-dev/ultima-nexus-jvm-gradle-plugins?label=version[Version, link="https://github.com/daymor-dev/ultima-nexus-jvm-gradle-plugins/releases/latest"]
image:https://img.shields.io/github/license/daymor-dev/ultima-nexus-jvm-gradle-plugins[License]
image:https://github.com/daymor-dev/ultima-nexus-jvm-gradle-plugins/actions/workflows/ci.yml/badge.svg[CI, link="https://github.com/daymor-dev/ultima-nexus-jvm-gradle-plugins/actions/workflows/ci.yml"]
image:https://github.com/daymor-dev/ultima-nexus-jvm-gradle-plugins/actions/workflows/publish.yml/badge.svg[Publish, link="https://github.com/daymor-dev/ultima-nexus-jvm-gradle-plugins/actions/workflows/publish.yml"]
image:https://github.com/daymor-dev/ultima-nexus-jvm-gradle-plugins/actions/workflows/github-code-scanning/codeql/badge.svg[CodeQL, link="https://github.com/daymor-dev/ultima-nexus-jvm-gradle-plugins/actions/workflows/github-code-scanning/codeql"]

image:https://github.com/codespaces/badge.svg[link="https://codespaces.new/daymor-dev/ultima-nexus-jvm-gradle-plugins?quickstart=1", alt="Open in GitHub Codespaces"]

Reusable Gradle convention plugins for JVM projects with quality checks, testing infrastructure, and publishing support.

== Overview

This project provides a comprehensive set of Gradle convention plugins for JVM-based projects. Designed to work with any JVM language:

* *All JVM Languages* - Language-agnostic bundles (`jvm-complete`) for Kotlin, Scala, Groovy, etc.
* *Java* - Full support with quality checks, testing, and publishing
* *Spring Boot* - Preconfigured dependencies and application setup
* *Ultima Nexus JVM Framework* - Complete integration with the framework conventions

The plugins can be used independently or combined through predefined "bundle" plugins to enforce consistent build configurations, code quality standards, and testing practices across projects.

=== Key Features

* *Quality Checks*: Checkstyle, PMD, SpotBugs, and Spotless formatting
* *Testing Infrastructure*: Unit, integration, functional, and performance test source sets
* *Publishing*: Maven Central publishing with signing support
* *Spring Boot Support*: Preconfigured Spring Boot development and test dependencies
* *Nullability*: JSpecify and Lombok integration
* *Reporting*: Code coverage (JaCoCo), SBOM generation, test reports
* *Documentation*: Antora documentation generation
* *Plug-and-Play*: Built-in fallback versions for dependencies - works out of the box

== Installation

TIP: *Best Practice*: Use Gradle version catalog (`libs.versions.toml`) instead of hardcoding versions.

=== Quick Start

Complete setup for a new multi-module project with just ONE plugin:

==== Step 1: Settings Script (`settings.gradle.kts`)

NOTE: Version catalogs (`libs`) cannot be used in `settings.gradle.kts` plugins block because it runs before the catalog is loaded. Use the direct `id("...") version "..."` syntax for settings plugins. The `alias(libs.plugins.xxx)` syntax works only in `build.gradle.kts` files.

[source,kotlin]
----
pluginManagement {
    repositories {
        gradlePluginPortal()
    }
}

plugins {
    id("dev.daymor.ultimanexus.jvm.gradle.bundle.ultima-nexus-jvm-complete") version "latest.release"
}
----

==== Step 2: Project Properties (`gradle.properties`)

[source,properties]
----
# Project identity
groupId=com.example.myproject
version=latest.release
description=My project description

# Gradle 9.x performance settings (recommended)
org.gradle.parallel=true
org.gradle.caching=true
org.gradle.configuration-cache=true
org.gradle.vfs.watch=true
org.gradle.jvmargs=-Xmx2g -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8
----

That's it! No `build.gradle.kts` configuration needed - plugins are applied automatically to all projects.

Run `./gradlew qualityCheck` to verify the setup.

=== Recommended gradle.properties (Gradle 9.x Best Practices)

For best performance with Gradle 9.x, use these properties in your `gradle.properties`:

[source,properties]
----
# ============================================
# Ultima Nexus JVM - Gradle 9.x Best Practices
# ============================================

# Project Identity
groupId=com.example.myproject
version=1.0.0-SNAPSHOT
description=My project description

# ============================================
# Performance Settings (Gradle 9.x Recommended)
# ============================================

# Enable parallel execution
org.gradle.parallel=true

# Enable build caching (2x faster rebuilds)
org.gradle.caching=true

# Enable configuration cache (preferred mode in Gradle 9.x)
org.gradle.configuration-cache=true

# Enable file system watching (faster change detection)
org.gradle.vfs.watch=true

# ============================================
# JVM Memory Settings
# ============================================
# Adjust based on project size:
#   Small projects: -Xmx2g
#   Medium projects: -Xmx4g
#   Large projects (100+ modules): -Xmx6g

org.gradle.jvmargs=-Xmx2g -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8
----

=== Usage by Project Type

==== Spring Boot Applications

For standalone Spring Boot applications:

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.ultima.nexus.jvm.application)
}
----

==== Spring Boot Libraries

For Spring Boot starters and shared libraries:

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.ultima.nexus.jvm.library)
}
----

==== Pure Java Applications

For Java CLI tools or services without Spring Boot:

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.java.complete.application)
}
----

==== Pure Java Libraries

For shared Java libraries:

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.java.complete.library)
}
----

==== Kotlin, Scala, or Other JVM Languages

Use the language-agnostic bundle, then add your language plugin:

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.jvm.complete)
    kotlin("jvm")  // or scala, groovy, etc.
}
----

==== BOM/Platform Projects

For version management platforms:

[source,kotlin]
----
plugins {
    alias(libs.plugins.ultimanexus.jvm.bundle.platform)
}
----

== Bundle Plugins Overview

Bundle plugins combine multiple individual plugins for common use cases:

[source]
----
Settings Bundles (apply in settings.gradle.kts):
├── ultima-nexus-jvm-settings  (project-structure + git-hooks + build-cache + develocity)
└── ultima-nexus-jvm-complete  (ALL-IN-ONE: settings + root + all subprojects)

Build Plugins (apply in build.gradle.kts):

Level 1 - Feature Bundles:
├── check          (checkstyle + pmd + spotbugs + format-java + format-gradle + dependencies)
├── test           (test + test-suites [configurable: integration, functional, performance])
├── report         (code-coverage + sbom + test + plugin-analysis)
├── documentation  (antora + antora-ui)
└── lombok         (lombok + lombok-test)

Level 2 - Project Bundles:
├── gradle-project         (lifecycle + identity + dependency-rules + repositories)
├── gradle-project-root    (lifecycle.root + dependencies.root + format-gradle.root + aggregation) [root only]
├── platform               (version-platform + identity) [BOM projects only]
├── jvm-complete           (gradle-project + check + test + report + lombok) [language-agnostic]
├── java-simple-application    (gradle-project + compile-java + application)
├── java-simple-library        (gradle-project + compile-java + java-library)
├── java-complete-application  (check + test + report + compile-java + application + jspecify)
└── java-complete-library      (check + test + report + compile-java + java-library + publish + jspecify)

Level 3 - Framework Bundles:
├── spring-boot-simple-application     (java-simple-application + spring-boot-application + spring-boot-test)
├── spring-boot-simple-library         (java-simple-library + spring-boot-library + spring-boot-test)
├── spring-boot-complete-application   (check + test + report + compile-java + spring-boot-application)
└── spring-boot-complete-library       (check + test + report + compile-java + spring-boot-library + publish)

Level 4 - Full Bundle:
├── ultima-nexus-jvm-application  (spring-boot-complete-application + lombok + documentation)
└── ultima-nexus-jvm-library      (spring-boot-complete-library + lombok + documentation)
----


== Dependency Fallbacks

The plugins provide built-in fallback versions for common dependencies when not specified in your version catalog.
This allows zero-configuration usage while still allowing version overrides.

The fallback versions are defined in link:plugins-core/src/main/kotlin/dev/daymor/ultimanexus/jvm/gradle/util/DependencyUtils.kt[DependencyUtils.kt].

To override any fallback version, add the dependency to your `libs.versions.toml`:

[source,toml]
----
[libraries]
lombok = { module = "org.projectlombok:lombok", version = "1.18.42" }
jspecify = { module = "org.jspecify:jspecify", version = "1.0.0" }
----

== Module Documentation

For detailed documentation on each module, see the individual README files:

[cols="1,3"]
|===
|Module |Description

|link:plugins-core/README.adoc[plugins-core]
|Foundation: Shared utilities, composite build settings, testing infrastructure

|link:plugins-base/README.adoc[plugins-base]
|Base: Identity, lifecycle tasks, dependency rules, repositories

|link:plugins-check/README.adoc[plugins-check]
|Quality: Checkstyle, PMD, SpotBugs, Spotless formatting, dependency analysis

|link:plugins-test/README.adoc[plugins-test]
|Testing: Unit, integration, functional, performance tests, test fixtures

|link:plugins-report/README.adoc[plugins-report]
|Reporting: Code coverage (JaCoCo), SBOM, test reports, plugin analysis

|link:plugins-publish/README.adoc[plugins-publish]
|Publishing: Maven Central, artifact signing, Gradle Plugin Portal

|link:plugins-java/README.adoc[plugins-java]
|Java: Compilation, application/library mode, Javadoc, JSpecify

|link:plugins-spring-boot/README.adoc[plugins-spring-boot]
|Spring Boot: Application/library mode, test dependencies, DevTools

|link:plugins-lombok/README.adoc[plugins-lombok]
|Lombok: Annotation processing for main and test sources

|link:plugins-documentation/README.adoc[plugins-documentation]
|Documentation: Antora site generation

|link:plugins-settings/README.adoc[plugins-settings]
|Settings: Project structure, git hooks, build cache, Develocity, Maven Central aggregation, SBOM support

|link:plugins-misc/README.adoc[plugins-misc]
|Miscellaneous: Aggregation, version platform, `jvm-complete` bundle, full `ultima-nexus-jvm` bundle
|===

== Requirements

* Gradle 9.0+ (tested with Gradle 9.2.1)
* Java 17+ (configured for Java 25 LTS by default)

== Contribution and Code of conduct

Contributions are welcome! +
If you find a bug, want to correct an issue or suggest improvements, please check out this link:./CONTRIBUTING.adoc[contributing].

The project follows a code of conduct, please check out this link:./CODE_OF_CONDUCT.md[code of conduct].

== Acknowledgements

This project was inspired by and builds upon the excellent work of many open source projects:

=== Gradle Plugins Used

[cols="1,2"]
|===
|Project |Description

|https://plugins.gradle.org/[Gradle Plugin Portal]
|Official Gradle plugin ecosystem including Plugin Publish plugin

|https://docs.gradle.com/develocity/gradle-plugin/[Develocity Gradle Plugin]
|Build scans and build cache management

|https://github.com/jjohannes/gradle-project-setup-howto[Gradle Project Setup How-To]
|Reference implementation for Gradle convention plugins architecture

|https://github.com/gradlex-org/jvm-dependency-conflict-resolution[JVM Dependency Conflict Resolution]
|Gradle plugin for resolving dependency conflicts in JVM projects

|https://github.com/diffplug/spotless[Spotless]
|Code formatting tool supporting multiple languages

|https://github.com/spotbugs/spotbugs-gradle-plugin[SpotBugs Gradle Plugin]
|Static analysis tool for finding bugs in Java code

|https://github.com/CycloneDX/cyclonedx-gradle-plugin[CycloneDX Gradle Plugin]
|SBOM generation in CycloneDX format

|https://github.com/autonomousapps/dependency-analysis-gradle-plugin[Dependency Analysis Gradle Plugin]
|Analyzes dependencies for unused/misused declarations

|https://github.com/node-gradle/gradle-node-plugin[Gradle Node Plugin]
|Run Node.js and npm/yarn scripts from Gradle

|https://github.com/antora/gradle-antora-plugin[Gradle Antora Plugin]
|Build Antora documentation sites from Gradle

|https://github.com/DanySK/gradle-pre-commit-git-hooks[Gradle Pre-Commit Git Hooks]
|Configure Git hooks via Gradle

|https://github.com/gradleup/nmcp[GradleUp NMCP]
|Maven Central publishing simplified

|https://github.com/nickygerritsen/classpath-collision-detector[Classpath Collision Detector]
|Detect duplicate classes in the classpath

|https://github.com/spring-projects/spring-boot[Spring Boot Gradle Plugin]
|Spring Boot application support
|===

=== Libraries Used at Runtime

[cols="1,2"]
|===
|Project |Description

|https://jspecify.dev/[JSpecify]
|Standard nullability annotations for Java

|https://projectlombok.org/[Lombok]
|Java annotation library to reduce boilerplate

|https://junit.org/junit5/[JUnit 5]
|Java testing framework

|https://www.slf4j.org/[SLF4J]
|Simple Logging Facade for Java

|https://bytebuddy.net/[Byte Buddy]
|Runtime code generation library

|https://checkstyle.org/[Checkstyle]
|Java code style checker

|https://pmd.github.io/[PMD]
|Source code analyzer

|https://spotbugs.github.io/[SpotBugs]
|Static analysis tool for Java

|https://assertj.github.io/doc/[AssertJ]
|Fluent assertions library for Java testing

|https://mockk.io/[MockK]
|Mocking library for Kotlin
|===

The plugin architecture and many conventions in this project follow the patterns established in the https://github.com/jjohannes/gradle-project-setup-howto/tree/spring_boot[Gradle Project Setup How-To (Spring Boot branch)] by Jendrik Johannes.

== Contact Information

If you have any questions, feedback, or collaboration ideas, feel free to contact:

* Email: link:mailto:ultima-nexus@daymor.dev[ultima-nexus@daymor.dev]
* GitHub: https://github.com/daymor-dev/ultima-nexus-jvm-gradle-plugins/discussions

== License

Ultima Nexus JVM gradle plugins is licensed under the https://www.apache.org/licenses/LICENSE-2.0[Apache License, Version 2.0].
